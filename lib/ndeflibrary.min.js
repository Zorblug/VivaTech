/*! lib-ndeflibrary - v1.0.0 - 2014-10-02 - Sebastian HÃ¶barth / Andreas Jakl */
!function(){function a(a){"use strict";a.NdefLibrary=function(a){return a=a||{},this}}function b(a){"use strict";a.NdefLibrary}function c(a){"use strict";var b=a.NdefLibrary,c=b.NdefAndroidAppRecord=function(){if(this.packageName="",1==arguments.length){if(b.NdefRecord.call(this,arguments[0]),!b.NdefAndroidAppRecord.isRecordType(this))throw"NdefException(NdefExceptionMessages.ExInvalidCopy)"}else b.NdefRecord.call(this,b.NdefRecord.TypeNameFormatType.ExternalRtd,b.NdefAndroidAppRecord.AndroidAppRecordType)};b.NdefAndroidAppRecord.AndroidAppRecordType="android.com:pkg".getBytes(),c.prototype=new b.NdefRecord,c.prototype.constructor=b.NdefAndroidAppRecord,b.NdefAndroidAppRecord.isRecordType=function(a){return null==a.getType()||0==a.getType().length?!1:a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.ExternalRtd&&o(a.getType(),b.NdefAndroidAppRecord.AndroidAppRecordType)},c.prototype.setPackageName=function(a){if(null==a)return void this.setPayload(null);var b=encodeURI(a),c=b.getBytes();this.setPayload(c)},c.prototype.getPackageName=function(){return null==this.getPayload()||0==this.getPayload().length?"":decodeURI(p(this.getPayload()))}}function d(a){"use strict";var b=a.NdefLibrary,c=b.NdefSocialRecord=function(){this.socialUserName="",this.socialType=b.NdefSocialRecord.NfcSocialType.Twitter,1==arguments.length?b.NdefUriRecord.call(this,arguments[0]):b.NdefUriRecord.call(this)};c.prototype=new b.NdefUriRecord,c.prototype.constructor=b.NdefSocialRecord,b.NdefSocialRecord.NfcSocialType={Twitter:0,LinkedIn:1,Facebook:2,Xing:3,VKontakte:4,FoursquareWeb:5,FoursquareApp:6,Skype:7,GooglePlus:8},b.NdefSocialRecord.SocialTagTypeUris=["http://twitter.com/{0}","http://linkedin.com/in/{0}","http://facebook.com/{0}","http://xing.com/profile/{0}","http://vkontakte.ru/{0}","http://m.foursquare.com/v/{0}","foursquare://venues/{0}","skype:{0}?call","https://plus.google.com/{0}"],c.prototype.updatePayload=function(){var a=b.NdefSocialRecord.SocialTagTypeUris[this.socialType],c=String.format(a,this.socialUserName);this.setUri(c)},c.checkIfValid=function(){if(!b.NdefUriRecord.prototype.checkIfValid())return!1;if(null==this.socialUserName||0==this.socialUserName.length)throw new"NdefException(NdefExceptionMessages.ExTelNumberEmpty)";return!0},c.prototype.getSocialUserName=function(){return this.socialUserName},c.prototype.setSocialUserName=function(a){this.socialUserName=a,this.updatePayload()},c.prototype.getSocialType=function(){return this.socialType},c.prototype.setSocialType=function(a){this.socialType=a,this.updatePayload()}}function e(a){"use strict";var b=a.NdefLibrary,c=b.NdefGeoRecord=function(){this.Longitude="",this.Latitude="",this._geoType="",1==arguments.length?(b.NdefUriRecord.call(this,arguments[0]),this.updatePayload()):b.NdefUriRecord.call(this)};c.prototype=new b.NdefUriRecord,c.prototype.constructor=b.NdefGeoRecord,b.NdefGeoRecord.NfcGeoType={GeoUri:0,BingMaps:1,NokiaMapsUri:2,WebRedirect:3,MsDriveTo:4,MsWalkTo:5},b.NdefSocialRecord.GeoTagTypeUris=["geo:{0},{1}","bingmaps:?cp={0}~{1}","http://m.ovi.me/?c={0},{1}","http://NfcInteractor.com/m?c={0},{1}","ms-drive-to:?destination.latitude={0}&destination.longitude={1}","ms-walk-to:?destination.latitude={0}&destination.longitude={1}"],c.prototype.updatePayload=function(){if(null!=this.Latitude&&0!=this.Latitude.length||null!=this.Longitude&&0!=this.Longitude.length){var a=b.NdefSocialRecord.GeoTagTypeUris[this.getGeoType()],c=String.format(a,this.Latitude,this.Longitude);this.setUri(c)}},c.prototype.getLatitude=function(){return this.Latitude},c.prototype.setLatitude=function(a){this.Latitude=a,this.updatePayload()},c.prototype.getLongitude=function(){return this.Longitude},c.prototype.setLongitude=function(a){this.Longitude=a,this.updatePayload()},c.prototype.getGeoType=function(){return this._geoType},c.prototype.setGeoType=function(a){this._geoType=a,this.updatePayload()}}function f(a){"use strict";var b=a.NdefLibrary,c=b.NdefTelRecord=function(){this.telNumber="",1==arguments.length?(b.NdefUriRecord.call(this,arguments[0]),this.parseUriToData(this.getUri())):b.NdefUriRecord.call(this)};b.NdefTelRecord.TelScheme="tel:",c.prototype=new b.NdefUriRecord,c.prototype.constructor=b.NdefTelRecord,b.NdefTelRecord.isRecordType=function(a){if(null==a.getType()||0==a.getType().length)return!1;if(a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.NfcRtd&&null!=a.getPayload()&&o(a.getType(),b.NdefUriRecord.UriType)){var c=new b.NdefUriRecord(a);return c.getUri().startsWith(b.NdefTelRecord.TelScheme)}return!1},c.checkIfValid=function(){if(!b.NdefUriRecord.prototype.checkIfValid())return!1;if(null==this.telNumber||0==this.telNumber.length)throw new"NdefException(NdefExceptionMessages.ExTelNumberEmpty)";return!0},c.prototype.getTelNumber=function(){return this.telNumber},c.prototype.setTelNumber=function(a){this.telNumber=a,this.updatePayload()},c.prototype.parseUriToData=function(a){var b=a.replace("tel:","");this.telNumber=b,this.updatePayload()},c.prototype.updatePayload=function(){null!=this.telNumber&&this.telNumber.length>0&&this.setUri(b.NdefTelRecord.TelScheme+this.telNumber)}}function g(a){"use strict";var b=a.NdefLibrary,c=b.NdefUriRecord=function(){this.RawUri=new Array,this.Uri="",1==arguments.length?b.NdefRecord.call(this,arguments[0]):b.NdefRecord.call(this,b.NdefRecord.TypeNameFormatType.NfcRtd,b.NdefUriRecord.UriType)};b.NdefUriRecord.UriType="U".getBytes(),b.NdefUriRecord.Abbreviations=["","http://www.","https://www.","http://","https://","tel:","mailto:","ftp://anonymous:anonymous@","ftp://ftp.","ftps://","sftp://","smb://","nfs://","ftp://","dav://","news:","telnet://","imap:","rtsp://","urn:","pop:","sip:","sips:","tftp:","btspp://","btl2cap://","btgoep://","tcpobex://","irdaobex://","file://","urn:epc:id:","urn:epc:tag:","urn:epc:pat:","urn:epc:raw:","urn:epc:","urn:nfc:"],b.NdefUriRecord.isRecordType=function(a){return null==a.getType()||0==a.getType().length?!1:a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.NfcRtd&&o(a.getType(),b.NdefUriRecord.UriType)},c.prototype=new b.NdefRecord,c.prototype.constructor=b.NdefUriRecord,c.prototype.getRawUri=function(){if(null==this.getPayload()||0==this.getPayload().length)return null;var a=this.getPayload()[0];0!=a&&console.log("NdefExceptionMessages.ExRawUriNoAbbreviation");var b=new Array(this.getPayload().length-1),c=this.getPayload();return l(c,1,b,0,c.length-1),b},c.prototype.setRawUri=function(a){var b=new Array(a.length+1);b[0]=0,l(a,0,b,1,a.length),this.setPayload(b)},c.prototype.setUri=function(a){for(var c=a,d=0,e=1;e<b.NdefUriRecord.Abbreviations.length;e++)if(c.startsWith(b.NdefUriRecord.Abbreviations[e])){d=e;break}var f=(b.NdefUriRecord.Abbreviations[d].length,c.replace(b.NdefUriRecord.Abbreviations[d],"")),g=n(f),h=new Array(g+1);h[0]=d;var i=encodeURI(f),j=i.getBytes();l(j,0,h,1,j.length),this.setPayload(h)},c.prototype.getUri=function(){var a=this.getPayload();if(null==a||0==a.length)return"";var c=a[0];c>=b.NdefUriRecord.Abbreviations.length&&(c=0);var d=new Array(a.length-1);return l(a,1,d,0,a.length-1),b.NdefUriRecord.Abbreviations[c].concat(decodeURI(p(d)))}}function h(a){"use strict";var b=a.NdefLibrary,c=b.NdefTextRecord=function(){if(this.LanguageCode=null,this.text=null,1==arguments.length){if(b.NdefRecord.call(this,arguments[0]),!b.NdefTextRecord.isRecordType(this))throw"NdefException(NdefExceptionMessages.ExInvalidCopy)"}else b.NdefRecord.call(this,b.NdefRecord.TypeNameFormatType.NfcRtd,b.NdefTextRecord.TextType)};c.prototype=new b.NdefRecord,c.prototype.constructor=b.NdefTextRecord,b.NdefTextRecord.TextType="T".getBytes(),b.NdefTextRecord.TextEncodingType={Utf8:0,Utf16:1},b.NdefTextRecord.isRecordType=function(a){return null==a.getType()||0==a.getType().length?!1:a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.NfcRtd&&o(a.getType(),b.NdefTextRecord.TextType)},c.prototype.setLanguageCode=function(a){this.assemblePayload(a,this.getTextEncoding(),this.getText())},c.prototype.getLanguageCode=function(){if(null==this.getPayload()||0==this.getPayload().length)return"en";var a=this.getPayload()[0],b=63&a,c=new Array(b);return l(this.getPayload(),1,c,0,b),decodeURI(p(c))},c.prototype.setText=function(a){this.assemblePayload(this.getLanguageCode(),this.getTextEncoding(),a)},c.prototype.getText=function(){if(null==this.getPayload()||0==this.getPayload().length)return"";var a=63&this.getPayload()[0],b=new Array;return l(this.getPayload(),1+a,b,0,this.getPayload().length-1-a),p(b)},c.prototype.setTextEncoding=function(a){this.assemblePayload(this.getLanguageCode(),a,this.getText())},c.prototype.getTextEncoding=function(){return null==this.getPayload()||0==this.getPayload().length?b.NdefTextRecord.TextEncodingType.Utf8:0!=(128&this.getPayload()[0])?b.NdefTextRecord.TextEncodingType.Utf16:b.NdefTextRecord.TextEncodingType.Utf8},c.prototype.assemblePayload=function(a,c,d){var e=a.getBytes(),f=d.getBytes(),g=1+e.length+f.length,h=new Array(g);h[0]=0,c==b.NdefTextRecord.TextEncodingType.Utf8?h[0]&=127:h[0]|=128,h[0]|=63&e.length,l(e,0,h,1,e.length),l(f,0,h,1+e.length,f.length),this.setPayload(h)}}function i(a){"use strict";var b=a.NdefLibrary,c=b.NdefRecord=function(){if(this._typeNameFormat=b.NdefRecord.TypeNameFormatType.Empty,this._type=[],this._id=[],this._payload=[],2==arguments.length)this._typeNameFormat=arguments[0],null!=arguments[1]&&this.setType(arguments[1]);else if(1==arguments.length){var a=arguments[0];null!=a.getType()&&this.setType(a.getType()),null!=a.getId()&&this.setId(a.getId()),null!=a.getPayload()&&this.setPayload(a.getPayload()),this._typeNameFormat=a.getTypeNameFormat()}else this._typeNameFormat=b.NdefRecord.TypeNameFormatType.Empty};c.TypeNameFormatType={Empty:0,NfcRtd:1,Mime:2,Uri:3,ExternalRtd:4,Unknown:5,Unchanged:6,Reserved:7},c.prototype.getId=function(){return this._id},c.prototype.setId=function(a){return null==a?void(this._id=null):(this._id=[],void l(a,this._id,a.length))},c.prototype.getType=function(){return this._type},c.prototype.setType=function(a){return null==a?void(this._type=null):(this._type=[],void l(a,this._type,a.length))},c.prototype.getPayload=function(){return this._payload},c.prototype.setPayload=function(a){return null==a?void(this._payload=null):(this._payload=[],void l(a,this._payload,a.length))},c.prototype.getTypeNameFormat=function(){return this._typeNameFormat},c.prototype.setTypeNameFormat=function(a){this._typeNameFormat=a},c.prototype.checkSpecializedType=function(){},c.prototype.checkIfValid=function(){if(this._typeNameFormat==b.NdefRecord.TypeNameFormatType.Unchanged||this._typeNameFormat==b.NdefRecord.TypeNameFormatType.Unknown){if(null!=this._type&&0!=this._type.length)throw"NdefExceptionMessages.ExRecordUnchangedTypeName"}else if(this._typeNameFormat!=b.NdefRecord.TypeNameFormatType.Empty&&(null==this._type||0==this._type.length))throw"NdefExceptionMessages.ExRecordNoType";if(this._typeNameFormat==b.NdefRecord.TypeNameFormatType.Unchanged&&null!=this._id&&0!=this._id.length)throw"NdefExceptionMessages.ExRecordUnchangedId";return!0}}function j(a){"use strict";var b=a.NdefLibrary,c=b.NdefMessage=function(){this._records=new Array,null!=arguments&&arguments.length>0&&l(arguments,this._records,arguments.length)};c.prototype.length=function(){return null==this._records?0:this._records.length},c.prototype.getRecords=function(){return this._records},c.prototype.push=function(a){null!=a&&this._records.push(a)},c.prototype.clear=function(){this._records=new Array},b.NdefMessage.fromByteArray=function(a){for(var c=new b.NdefMessage,d=!1,e=!1,f=new Array,g=new b.NdefRecord,h=0;h<a.length;){var i=0!=(128&a[h]),j=0!=(64&a[h]),k=0!=(32&a[h]),n=0!=(16&a[h]),o=0!=(8&a[h]),p=7&a[h];if(i&&d)throw"NdefExceptionMessages.ExMessageBeginLate";if(!i&&!d)throw"NdefExceptionMessages.ExMessageBeginMissing";if(i&&!d&&(d=!0),j&&e)throw"NdefExceptionMessages.ExMessageEndLate";if(j&&!e&&(e=!0),k&&p!=b.NdefRecord.TypeNameFormatType.Unchanged&&f.length>0)throw"NdefExceptionMessages.ExMessagePartialChunk";var q=1;if(q+=n?1:4,q+=o?1:0,h+q>=a.length)throw"NdefExceptionMessages.ExMessageUnexpectedEnd";var r=a[++h];if(p==b.NdefRecord.TypeNameFormatType.Unchanged&&0!=r)throw"NdefExceptionMessages.ExMessageInvalidChunkedType";var s;n?s=a[++h]:(s=a[++h]<<24,s|=a[++h]<<16,s|=a[++h]<<8,s|=a[++h]<<0);var t;t=o?a[++h]:0;var u=r+s+t;if(h+u>=a.length)throw"NdefExceptionMessages.ExMessageUnexpectedEnd";if(p==b.NdefRecord.TypeNameFormatType.Unchanged&&0!=t)throw"NdefExceptionMessages.ExMessageInvalidChunkedId";if(p!=b.NdefRecord.TypeNameFormatType.Unchanged&&g.setTypeNameFormat(p),r>0){var v=new Array;l(a,++h,v,0,r),g.setType(v),h+=r-1}if(t>0){var w=new Array;l(a,++h,w,0,t),g.setId(w),h+=t-1}if(s>0){var x=new Array;l(a,++h,x,0,s),g.setPayload(x),k?m(f,x):p==b.NdefRecord.TypeNameFormatType.Unchanged?(m(f,x),g.setPayload(f)):g.setPayload(x),h+=s-1}if(k||(c.push(g),g=new b.NdefRecord),!k&&e)break;++h}if(!d&&!e)throw"NdefExceptionMessages.ExMessageNoBeginOrEnd";return c},c.prototype.toByteArray=function(){var a=this._records.length;if(0==a){var c=new b.NdefMessage(new b.NdefRecord);return c.toByteArray()}for(var d=new Array,e=0;a>e;e++){var f=this._records[e],g=f.getTypeNameFormat();if(0==e&&(g|=128),e==a-1&&(g|=64),(null==f.getPayload()||f.getPayload().length<255)&&(g|=16),null!=f.getId()&&f.getId().length>0&&(g|=8),d.push(g),d.push(null!=f.getType()?f.getType().length:0),null==f.getPayload())d.push(0);else if(0!=(16&g))d.push(f.getPayload().length);else{var h=f.getPayload().length;d.push(h>>24),d.push(h>>16),d.push(h>>8),d.push(255&h)}null!=f.getId()&&0!=(8&g)&&d.push(f.getId().length),null!=f.getType()&&f.getType().length>0&&m(d,f.getType()),null!=f.getId()&&f.getId().length>0&&m(d,f.getId()),null!=f.getPayload()&&f.getPayload().length>0&&m(d,f.getPayload())}return d}}var k=!1,l=function(){var a,b,c=0,d=0,e=0;2===arguments.length?(a=arguments[0],b=arguments[1],e=a.length):3===arguments.length?(a=arguments[0],b=arguments[1],e=arguments[2]):5===arguments.length&&(a=arguments[0],c=arguments[1],b=arguments[2],d=arguments[3],e=arguments[4]);for(var f=c,g=d;e+c>f;f++,g++){if(null===b[g])throw"array index out of bounds exception";b[g]=a[f]}},m=function(a,b){var c,d,e,f=0,g=0;c=b,f=0,d=a,g=a.length,e=b.length;for(var h=f,i=g;e+f>h;h++,i++){if(null===d[i])throw"array index out of bounds exception";d[i]=c[h]}},n=function(a){var b=encodeURI(a);if(-1!=b.indexOf("%")){var c=b.split("%").length-1;0==c&&c++;var d=b.length-3*c;c+=d}else c=b.length;return c},o=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0};String.prototype.startsWith=function(a){return this.slice(0,a.length)==a},String.prototype.getBytes=function(){for(var a=[],b=0;b<this.length;++b)a.push(this.charCodeAt(b));return a},String.format=function(){for(var a=arguments[0],b=0;b<arguments.length-1;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b+1])}return a};var p=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(parseInt(a[c]));return b};"undefined"==typeof k&&(k=!0);var q=Function,r=(new q("return this")(),function(k){return a(k),b(k),i(k),j(k),g(k),c(k),f(k),d(k),e(k),h(k),k.NdefLibrary});"function"==typeof define&&define.amd?define(function(){return r({})}):r(this)}(this);